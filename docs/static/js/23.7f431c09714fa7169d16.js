webpackJsonp([23],{AhKz:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("Xxa5"),n=r.n(o),a=r("woOf"),i=r.n(a),l=r("exGp"),s=r.n(l),c=r("vLgD");function d(e){return Object(c.a)({url:"/management-web/http/do.jhtml?router=preOrderService.listOrder",method:"post",data:e})}function u(e){return Object(c.a)({url:"/management-web/http/do.jhtml?router=preOrderService.queryOrderDetail",method:"post",data:e})}var f={name:"reservationListSearch",data:function(){return{datePickerValue:[],form:{customer_code:"",plate_number:"",container_code:"",order_start_time:"",order_end_time:"",order_status:"",order_type:""},order_status:[],order_type:[],list:[],multipleSelection:[],listLoading:!1,listQuery:{startPage:1,limit:10},total:0,orderListQuery:{startPage:1,limit:10},orderTotal:0,orderList:[],orderListLoading:!1,orderLogList:[],orderLogListLoading:!1,orderModel:{},isOrderDialogShow:!1,isLogDialogShow:!1}},filters:{orderTime:function(e){return e.split(" ")[1]},orderDate:function(e){return e.split(" ")[0]}},watch:{datePickerValue:function(e){console.log(e),this.form.order_start_time=e[0],this.form.order_end_time=e[1]}},created:function(){var e=this;this.fetchData(this.listQuery),this.getSelect("order_status").then(function(t){t.rows.push({remark:"全部",code:""}),e.order_status=t.rows}),this.getSelect("order_type").then(function(t){t.rows.push({remark:"全部",code:""}),e.order_type=t.rows})},methods:{fetchData:function(e){var t=this;return s()(n.a.mark(function r(){var o,a;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return(o=i()({},e)).startPage--,o.id=t.form.parent_id,t.listLoading=!0,r.prev=4,r.next=7,d(o);case 7:a=r.sent,t.list=a.rows,t.listLoading=!1,t.total=a.total,r.next=17;break;case 13:r.prev=13,r.t0=r.catch(4),console.log(r.t0),t.listLoading=!1;case 17:t.initForm();case 18:case"end":return r.stop()}},r,t,[[4,13]])}))()},searchLIst:function(){var e=i()({},this.listQuery,this.form);for(var t in e)!e[t]&&delete e[t];this.fetchData(e)},getSelect:function(e){return t={dic_key:e,page:1,start:0,limit:50},Object(c.a)({url:"/management-web/http/do.jhtml?router=masterDataService.listDic",method:"post",data:t});var t},orderDetail:function(e){var t=this;return s()(n.a.mark(function r(){var o,a;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.orderListLoading=!0,t.orderModel=e,t.isOrderDialogShow=!0,o=i()({},{order_id:e.order_id}),r.next=6,u(o);case 6:a=r.sent,t.orderList=a,t.orderListLoading=!1;case 9:case"end":return r.stop()}},r,t)}))()},orderLog:function(e){var t=this;this.orderModel=e,this.isLogDialogShow=!0,this.orderLogListLoading=!0;var r=i()({},this.orderListQuery,{booking_nos:e.booking_nos});r.startPage--,function(e){return Object(c.a)({url:"/management-web/http/do.jhtml?router=preOrderService.queryOrderLog",method:"post",data:e})}(r).then(function(e){t.orderLogList=e.rows,t.orderTotal=e.total,t.orderLogListLoading=!1})},orderFinish:function(e){var t=this;return s()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.handleConfirm("是否完成此预约单？");case 3:return r.next=5,o={order_id:e.order_id},Object(c.a)({url:"/management-web/http/do.jhtml?router=preOrderService.overOrder",method:"post",data:o});case 5:t.$message({type:"success",message:"预约单已完成!"}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),t.$message({type:"info",message:"操作已取消"});case 11:case"end":return r.stop()}var o},r,t,[[0,8]])}))()},orderClose:function(e){var t=this;return s()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(e),r.prev=1,r.next=4,t.handleConfirm("是否关闭此预约单？");case 4:return r.next=6,o={order_id:e.order_id},Object(c.a)({url:"/management-web/http/do.jhtml?router=preOrderService.closeOrder",method:"post",data:o});case 6:t.$message({type:"success",message:"预约单已关闭!"}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),t.$message({type:"info",message:"操作已取消"});case 12:case"end":return r.stop()}var o},r,t,[[1,9]])}))()},handleConfirm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"提示";return this.$confirm(e,t,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.listQuery.limit=e,this.fetchData(this.listQuery)},handleCurrentChange:function(e){this.listQuery.startPage=e,this.fetchData(this.listQuery)},orderSizeChange:function(e){this.orderListQuery.limit=e,this.orderLog(this.orderModel)},orderCurrentChange:function(e){this.orderListQuery.startPage=e,this.orderLog(this.orderModel)},initForm:function(){this.form=i()(this.form,{customer_code:"",plate_number:"",container_code:"",order_start_time:"",order_end_time:""})}}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px","label-position":"top",inline:!0}},[r("el-form-item",{attrs:{label:"日期选择"}},[r("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.datePickerValue,callback:function(t){e.datePickerValue=t},expression:"datePickerValue"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"客户编码"}},[r("el-input",{model:{value:e.form.customer_code,callback:function(t){e.$set(e.form,"customer_code",t)},expression:"form.customer_code"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"车牌号"}},[r("el-input",{model:{value:e.form.plate_number,callback:function(t){e.$set(e.form,"plate_number",t)},expression:"form.plate_number"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"箱号"}},[r("el-input",{model:{value:e.form.container_code,callback:function(t){e.$set(e.form,"container_code",t)},expression:"form.container_code"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"业务类型"}},[r("el-select",{attrs:{placeholder:"please select your zone"},model:{value:e.form.order_status,callback:function(t){e.$set(e.form,"order_status",t)},expression:"form.order_status"}},e._l(e.order_status,function(e,t){return r("el-option",{key:t,attrs:{label:e.remark,value:e.code}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"订单状态"}},[r("el-select",{attrs:{placeholder:"please select your zone"},model:{value:e.form.order_type,callback:function(t){e.$set(e.form,"order_type",t)},expression:"form.order_type"}},e._l(e.order_type,function(e,t){return r("el-option",{key:t,attrs:{label:e.remark,value:e.code}})}))],1)],1),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px","label-position":"top",inline:!0}},[r("el-form-item",[r("el-button",{attrs:{type:"primary",plain:""},on:{click:e.searchLIst}},[e._v("查询")])],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.order_status)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"业务类型",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.order_type)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"客户编码",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.customer_code)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"预约日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("orderDate")(t.row.order_start_time)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"预约时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("orderTime")(t.row.order_start_time))+" - "+e._s(e._f("orderTime")(t.row.order_end_time))+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"承运单位",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.hualier_code)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"车牌号",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.plate_number)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"集装箱数量",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{on:{click:function(r){e.orderDetail(t.row)}}},[e._v(" "+e._s(t.row.countContainer))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"预约单号",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{on:{click:function(r){e.orderLog(t.row)}}},[e._v(" "+e._s(t.row.booking_nos))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[5===t.row.order_status?r("el-button",{attrs:{type:"success",plain:""},on:{click:function(r){e.orderFinish(t.row)}}},[e._v("完成预约单")]):e._e(),e._v(" "),3===t.row.order_status?r("el-button",{attrs:{type:"danger",plain:""},on:{click:function(r){e.orderClose(t.row)}}},[e._v("关闭预约单")]):e._e()]}}])})],1),e._v(" "),r("div",{staticClass:"pagination-container"},[r("el-pagination",{attrs:{background:"","current-page":e.listQuery.startPage,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"明细",visible:e.isOrderDialogShow},on:{"update:visible":function(t){e.isOrderDialogShow=t}}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.orderListLoading,expression:"orderListLoading",modifiers:{body:!0}}],attrs:{data:e.orderList,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{align:"center",label:"箱号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.container_code)+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"箱门方向"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.container_direction)+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"集装箱等级"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.container_grade)+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"集装箱尺寸"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.container_size)+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"集装箱箱型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.container_type)+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.create_time)+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"更新时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.update_time)+"\n        ")]}}])})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"单据LOG",visible:e.isLogDialogShow},on:{"update:visible":function(t){e.isLogDialogShow=t}}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.orderLogListLoading,expression:"orderLogListLoading",modifiers:{body:!0}}],attrs:{data:e.orderLogList,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.create_time)+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.order_status)+"\n        ")]}}])})],1),e._v(" "),r("div",{staticClass:"pagination-container"},[r("el-pagination",{attrs:{background:"","current-page":e.orderListQuery.startPage,"page-sizes":[10,20,30,50],"page-size":e.orderListQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.orderTotal},on:{"size-change":e.orderSizeChange,"current-change":e.orderCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var _=r("VU/8")(f,m,!1,function(e){r("GhS5")},"data-v-4ccea5fb",null);t.default=_.exports},Bs3Y:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n.line[data-v-4ccea5fb]{\r\n  text-align: center;\n}\r\n",""])},GhS5:function(e,t,r){var o=r("Bs3Y");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);r("rjj0")("68d3dcc7",o,!0)}});