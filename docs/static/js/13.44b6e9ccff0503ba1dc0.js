webpackJsonp([13],{EiuG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Xxa5"),a=n.n(o),l=n("woOf"),i=n.n(l),r=n("exGp"),s=n.n(r),c=n("y+7F"),u={name:"boxPositionRelation",data:function(){return{form:{unit_name:"",area_name_n:"",area_name_s:"",block:[{block_name:"",row_num:"",slot_start_no:"",slot_end_no:"",edit:!0}]},list:[],multipleSelection:[],listLoading:!1,listQuery:{startPage:1,limit:10},total:0,blockList:[],blockListLoading:!1,newBlockListLoading:!1,orderModel:{},savePositionDialogShow:!1}},filters:{},watch:{},created:function(){this.fetchData(this.listQuery)},methods:{fetchData:function(t){var e=this;return s()(a.a.mark(function n(){var o,l;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(o=i()({},t)).startPage--,e.listLoading=!0,n.prev=3,n.next=6,c.a(o);case 6:l=n.sent,e.list=l.rows,e.listLoading=!1,e.total=l.total,n.next=16;break;case 12:n.prev=12,n.t0=n.catch(3),console.log(n.t0),e.listLoading=!1;case 16:e.initForm();case 17:case"end":return n.stop()}},n,e,[[3,12]])}))()},addUnit:function(){var t=this;c.c(this.form).then(function(e){t.cancel()})},addBlock:function(){this.form.block.push({block_name:"",row_num:"",slot_start_no:"",slot_end_no:"",edit:!0})},openEdit:function(t){t.edit=!0},confirmEdit:function(t){t.slot_start_no>=t.slot_end_no?this.$message({message:"箱位开始必须小于箱位结束",type:"warning"}):t.edit=!1},cancel:function(){this.savePositionDialogShow=!1,this.initForm()},addBtn:function(){this.savePositionDialogShow=!0,this.initForm()},handleConfirm:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"提示";return this.$confirm(t,e,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},rowClick:function(t,e,n){var o=this;console.log(t),c.b({unit_id:t.unit_id}).then(function(t){o.blockList=t})},handleSelectionChange:function(t){this.multipleSelection=t},handleSizeChange:function(t){this.listQuery.limit=t,this.fetchData(this.listQuery)},handleCurrentChange:function(t){this.listQuery.startPage=t,this.fetchData(this.listQuery)},rowStyle:function(){return{cursor:"pointer"}},initForm:function(){this.form=i()(this.form,{unit_name:"",area_name_n:"",area_name_s:"",block:[{block_name:"",row_num:"",slot_start_no:"",slot_end_no:"",edit:!0}]})}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px","label-position":"top",inline:!0}},[n("el-form-item",[n("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addBtn}},[t._v("新增")])],1)],1),t._v(" "),n("el-row",{attrs:{gutter:40}},[n("el-col",{attrs:{span:12}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","row-style":t.rowStyle},on:{"row-click":t.rowClick,"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{align:"center",label:"储存单元"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.unit_name)+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"站台（南）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.area_name_s)+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"站台（北）"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.area_name_n)+"\n          ")]}}])})],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.blockListLoading,expression:"blockListLoading",modifiers:{body:!0}}],attrs:{data:t.blockList,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"储存区"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.block_name)+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"箱位",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.slot_num)+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"列"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.row_num)+"\n          ")]}}])})],1)],1)],1),t._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{background:"","current-page":t.listQuery.startPage,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),n("el-dialog",{attrs:{title:"新增",visible:t.savePositionDialogShow},on:{"update:visible":function(e){t.savePositionDialogShow=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px","label-position":"top",inline:!0}},[n("el-form-item",{attrs:{label:"单元名"}},[n("el-input",{model:{value:t.form.unit_name,callback:function(e){t.$set(t.form,"unit_name",e)},expression:"form.unit_name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"站台（北）"}},[n("el-input",{model:{value:t.form.area_name_n,callback:function(e){t.$set(t.form,"area_name_n",e)},expression:"form.area_name_n"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"站台（南）"}},[n("el-input",{model:{value:t.form.area_name_s,callback:function(e){t.$set(t.form,"area_name_s",e)},expression:"form.area_name_s"}})],1)],1),t._v(" "),n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px","label-position":"top",inline:!0}},[n("el-form-item",[n("el-button",{attrs:{icon:"el-icon-plus",type:"success",plain:""},on:{click:t.addBlock}},[t._v("添加")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.newBlockListLoading,expression:"newBlockListLoading",modifiers:{body:!0}}],attrs:{data:t.form.block,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"储存区名"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[n("el-input",{attrs:{size:"small"},model:{value:e.row.block_name,callback:function(n){t.$set(e.row,"block_name",n)},expression:"scope.row.block_name"}})]:n("span",[t._v(t._s(e.row.block_name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"列",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[n("el-input",{attrs:{size:"small"},model:{value:e.row.row_num,callback:function(n){t.$set(e.row,"row_num",n)},expression:"scope.row.row_num"}})]:n("span",[t._v(t._s(e.row.row_num))])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"箱位区间","min-width":"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[n("el-input",{staticClass:"table-input",attrs:{size:"small",placeholder:"开始"},model:{value:e.row.slot_start_no,callback:function(n){t.$set(e.row,"slot_start_no",n)},expression:"scope.row.slot_start_no"}}),t._v("\n              -\n              "),n("el-input",{staticClass:"table-input",attrs:{size:"small",placeholder:"结束"},model:{value:e.row.slot_end_no,callback:function(n){t.$set(e.row,"slot_end_no",n)},expression:"scope.row.slot_end_no"}})]:n("span",[t._v(t._s(e.row.slot_start_no+"-"+e.row.slot_end_no))])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?n("el-button",{attrs:{type:"success",plain:"",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(n){t.confirmEdit(e.row)}}},[t._v("Ok")]):n("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-edit"},on:{click:function(n){t.openEdit(e.row)}}},[t._v("Edit")])]}}])})],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"success",plain:""},on:{click:t.addUnit}},[t._v("确认")]),t._v(" "),n("el-button",{attrs:{type:"info",plain:""},on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var m=n("VU/8")(u,d,!1,function(t){n("Oyhq")},"data-v-6dabe53d",null);e.default=m.exports},FFZo:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.table-input[data-v-6dabe53d]{\r\n  display: inline-block;\r\n  width: 40%;\n}\r\n",""])},Oyhq:function(t,e,n){var o=n("FFZo");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("2fc9b1ba",o,!0)},"y+7F":function(t,e,n){"use strict";e.a=function(t){return Object(o.a)({url:"/management-web/http/do.jhtml?router=positionRelationService.list",method:"post",data:t})},e.b=function(t){return Object(o.a)({url:"/management-web/http/do.jhtml?router=positionRelationService.queryBlockByUnit",method:"post",data:t})},e.c=function(t){return Object(o.a)({url:"/management-web/http/do.jhtml?router=positionRelationService.savePosition",method:"post",data:t})};var o=n("vLgD")}});